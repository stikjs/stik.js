!function(n){if(n.stik)throw"Stik is already loaded. Check your requires ;)";n.stik={}}(window),function(n){n.injectable=function(t){function e(n){function e(){}var o,r;return e.prototype=t.module.prototype,o=new e,r=i(o,n),Object(r)===r?r:o}function o(e){var o=n.injector({executionUnit:t.module,modules:e});return o.resolveDependencies()}function i(n,e){var o=t.module.apply(n,e);return r(o),o}function r(n){t.cache===!0&&(t.cachedValue=n)}return t.instantiable=t.instantiable||!1,t.resolvable=t.resolvable||!1,t.cache=t.cache||!1,t.resolve=function(n){return t.cachedValue?t.cachedValue:t.instantiable===!0?e(o(n)):t.resolvable===!0?i({},o(n)):t.module},t}}(window.stik),function(n){n.createController=function(t){if(!t.name)throw"Stik: Controller needs a name";return t.actions={},t.action=function(e,o){var i=n.action({name:e,controller:t.name,executionUnit:o});return t.actions[e]=i,i},t.bind=function(n){var e,o=!1;for(e in t.actions)t.actions[e].bind(n)&&(o=!0);return o},t}}(window.stik),function(n,t){t.action=function(e){function o(n){return{context:t.context({controller:e.controller,action:e.name,template:n}),executionUnit:e.executionUnit}}function i(n){n.className=(n.className+" stik-bound").trim()}if(!e.controller)throw"Stik: Action needs an controller name";if(!e.name)throw"Stik: Action name can't be empty";if(!e.executionUnit)throw"Stik: Action needs a function to use as its execution unit";return e.bind=function(n){for(var t=e.findTemplates(),r=t.length;r--;)o(t[r]).context.load(e.executionUnit,n),i(t[r]);return t.length>0},e.findTemplates=function(t){var o=n;t&&(o=t);var i="[data-controller="+e.controller+"][data-action="+e.name+"]:not([class*=stik-bound])";return o.querySelectorAll(i)},e.bindWithTemplate=o,e}}(window.document,window.stik),function(n){n.context=function(t){function e(t,e){var o=n.injector({executionUnit:t,modules:e});return o.resolveDependencies()}function o(n){return n.$template=t.template,n}return t.template=n.injectable({module:t.template}),t.load=function(n,i){var r=e(n,o(i));n.apply(t,r)},t}}(window.stik),function(n,t){t.createBehavior=function(e){function o(n){return{context:t.context({behavior:e.behavior,template:n}),executionUnit:e.executionUnit}}function i(){var t="[class*="+e.name+"]:not([data-behaviors*="+e.name+"])";return n.querySelectorAll(t)}function r(n){var t=n.getAttribute(c);t=((t||"")+" "+e.name).trim(),n.setAttribute(c,t)&a(n)}function a(n){var t=new RegExp("(^|\\s)?"+e.name+"(\\s|$)","g");n.className=n.className.replace(t," ").trim()}if(!e.name)throw"Stik: Behavior name is missing";if(-1!==e.name.indexOf(" "))throw"Stik: '"+e.name+"' is not a valid Behavior name. Please replace empty spaces with dashes ('-')";if(!e.executionUnit)throw"Stik: Behavior needs a function to use as its execution unit";var c="data-behaviors";return e.bind=function(n){for(var t=e.findTemplates(),i=t.length;i--;)o(t[i]).context.load(e.executionUnit,n),r(t[i]);return t.length>0},e.bindWithTemplate=o,e.findTemplates=i,e}}(window.document,window.stik),function(n){n.createBoundary=function(t){if(-1!==t.as.indexOf(" "))throw"Stik: '"+t.as+"' is not a valid Boundary name. Please replace empty spaces with dashes ('-')";if(!t.to)throw"Stik: Boundary needs an object or function as 'to'";var e={};return e.to=n.injectable({module:t.to,instantiable:t.instantiable,resolvable:t.resolvable,cache:t.cache}),e.name=t.as,e}}(window.stik),function(n){n.injector=function(n){function t(){var t,o,i;return t=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,o=n.executionUnit.toString(),i=o.match(t)[1].split(","),e(i)}function e(n){var t=[];return n.forEach(function(n){t.push(n.trim())}),t}function o(t){var e,o;if(o=[],1===t.length&&""===t[0])return[];for(var i=0;i<t.length;i++){if(!(e=n.modules[t[i]]))throw"Stik: could not find this module ("+t[i]+")";o.push(e.resolve(n.modules))}return o}if(!n.executionUnit)throw"Stik: Injector needs a function to use as its execution unit";return n.resolveDependencies=function(){var n=t();return o(n)},n}}(window.stik),function(n){n.manager=function(){function t(t){var e=n.createController({name:t});return c[t]=e,e}function e(n){return!!a[n]}function o(t,e){return n.createBehavior(t,e)}function i(n){var t,e={};for(t in n)e[t]=n[t].to;for(t in u.all)e[t]=u.all[t].to;return e}function r(n){var t=i(u.controller);n.bind(t)}var a={},c={},u={all:{},controller:{},behavior:{}},l={};return l.addControllerWithAction=function(n,e,o){var r=t(n),a=r.action(e,o);return a.bind(i(u.controller)),r},l.addController=function(n,e){var o=t(n);return e.call({},o),r(o),o},l.addBehavior=function(n,t){if(e(n))throw"Stik: Another behavior already exist with name '"+n+"'";var i=o({name:n,executionUnit:t});return a[n]=i,l.applyBehavior(i),i},l.addBoundary=function(t){var e;if(t.from=t.from||"all",-1===["all","controller","behavior"].indexOf(t.from))throw"Stik: Invalid boundary 'from' specified. Please use 'controller', 'behavior', 'all' or leave it blank to default to 'all'";return e=n.createBoundary(t),u[t.from][t.as]=e,e},l.applyBehaviors=function(){var n,t=!1;for(n in a)l.applyBehavior(a[n])&&(t=!0);return t},l.applyBehavior=function(n){var t=i(u.behavior);return n.bind(t)},l.bindActionWithTemplate=function(n,t,e){var o,r=i(u.controller);return o=c[n].actions[t].bindWithTemplate(e,r),o.modules=r,o},l.bindBehaviorWithTemplate=function(n,t){var e,o=i(u.behavior);return e=a[n].bindWithTemplate(t,o),e.modules=o,e},l.bindActions=function(){var n,t=i(u.controller),e=!1;for(n in c)c[n].bind(t)&&(e=!0);return e},l.getBoundary=function(n){var t,e;for(t in u)for(e in u[t])if(e===n)return u[t][e]},l.boundariesFor=function(n){return i(u[n])},l.$reset=function(){c={},a={}},l}}(window.stik),function(n){n.$$manager=n.manager(),n.controller=function(t,e,o){return"string"==typeof e?n.$$manager.addControllerWithAction(t,e,o):n.$$manager.addController(t,e)},n.behavior=function(t,e){return n.$$manager.addBehavior(t,e)},n.lazyBind=window.stik.bindLazy=function(){if(!n.$$manager.bindActions()&!n.$$manager.applyBehaviors())throw"Stik: Nothing new to bind!"},n.boundary=function(t){return n.$$manager.addBoundary(t)}}(window.stik);