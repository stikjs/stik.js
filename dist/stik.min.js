!function(n){if(n.stik)throw"Stik is already loaded. Check your requires ;)";n.stik={}}(window),function(n){n.injectable=function(t){function e(n){function e(){}var r,i;return e.prototype=t.module.prototype,r=new e,i=o(r,n),Object(i)===i?i:r}function r(e){var r=n.injector({executionUnit:t.module,modules:e});return r.resolveDependencies()}function o(n,e){var r=t.module.apply(n,e);return i(r),r}function i(n){t.cache===!0&&(t.cachedValue=n)}return t.instantiable=t.instantiable||!1,t.resolvable=t.resolvable||!1,t.cache=t.cache||!1,t.resolve=function(n){return t.cachedValue?t.cachedValue:t.instantiable===!0?e(r(n)):t.resolvable===!0?o({},r(n)):t.module},t}}(window.stik),function(n){n.createController=function(t){if(!t.name)throw"Stik: Controller needs a name";return t.actions={},t.action=function(e,r){var o=n.action({name:e,controller:t.name,executionUnit:r});return t.actions[e]=o,o},t.bind=function(n){var e,r=!1;for(e in t.actions)t.actions[e].bind(n)&&(r=!0);return r},t}}(window.stik),function(n,t){t.action=function(e){function r(n){return{context:t.context({controller:e.controller,action:e.name,template:n}),executionUnit:e.executionUnit}}function o(n){n.className=(n.className+" stik-bound").trim()}if(!e.controller)throw"Stik: Action needs an controller name";if(!e.name)throw"Stik: Action name can't be empty";if(!e.executionUnit)throw"Stik: Action needs a function to use as its execution unit";return e.bind=function(n){for(var t=e.findTemplates(),i=t.length;i--;)r(t[i]).context.load(e.executionUnit,n),o(t[i]);return t.length>0},e.findTemplates=function(t){var r=n;t&&(r=t);var o="[data-controller="+e.controller+"][data-action="+e.name+"]:not([class*=stik-bound])";return r.querySelectorAll(o)},e.bindWithTemplate=r,e}}(window.document,window.stik),function(n){n.context=function(t){function e(t,e){var r=n.injector({executionUnit:t,modules:e});return r.resolveDependencies()}function r(n){return n.$template=t.template,n}return t.template=n.injectable({module:t.template}),t.load=function(n,o){var i=e(n,r(o));n.apply(t,i)},t}}(window.stik),function(n,t){t.createBehavior=function(e){function r(n){return{context:t.context({behavior:e.behavior,template:n}),executionUnit:e.executionUnit}}function o(){var t="[class*="+e.name+"]:not([data-behaviors*="+e.name+"])";return n.querySelectorAll(t)}function i(n){var t=n.getAttribute(u);t=((t||"")+" "+e.name).trim(),n.setAttribute(u,t)&a(n)}function a(n){var t=new RegExp("(^|\\s)?"+e.name+"(\\s|$)","g");n.className=n.className.replace(t," ").trim()}if(!e.name)throw"Stik: Behavior name is missing";if(-1!==e.name.indexOf(" "))throw"Stik: '"+e.name+"' is not a valid Behavior name. Please replace empty spaces with dashes ('-')";if(!e.executionUnit)throw"Stik: Behavior needs a function to use as its execution unit";var u="data-behaviors";return e.bind=function(n){for(var t=e.findTemplates(),o=t.length;o--;)r(t[o]).context.load(e.executionUnit,n),i(t[o]);return t.length>0},e.bindWithTemplate=r,e.findTemplates=o,e}}(window.document,window.stik),function(n){n.createBoundary=function(t){if(-1!==t.as.indexOf(" "))throw"Stik: '"+t.as+"' is not a valid Boundary name. Please replace empty spaces with dashes ('-')";if(!t.to)throw"Stik: Boundary needs an object or function as 'to'";var e={};return e.to=n.injectable({module:t.to,instantiable:t.instantiable,resolvable:t.resolvable,cache:t.cache}),e.name=t.as,e}}(window.stik),function(n){n.injector=function(n){function t(){var t,r,o;return t=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,r=n.executionUnit.toString(),o=r.match(t)[1].split(","),e(o)}function e(n){var t=[];return n.forEach(function(n){t.push(n.trim())}),t}function r(t){var e,r;if(r=[],1===t.length&&""===t[0])return[];for(var o=0;o<t.length;o++){if(!(e=n.modules[t[o]]))throw"Stik: could not find this module ("+t[o]+")";r.push(e.resolve(n.modules))}return r}if(!n.executionUnit)throw"Stik: Injector needs a function to use as its execution unit";return n.resolveDependencies=function(){var n=t();return r(n)},n}}(window.stik),function(n){n.manager=function(){function t(t){var e=n.createController({name:t});return u[t]=e,e}function e(n){return!!a[n]}function r(t,e){return n.createBehavior(t,e)}function o(n){var t,e={};for(t in n)e[t]=n[t].to;for(t in c.all)e[t]=c.all[t].to;return e}function i(n){var t=o(c.controller);n.bind(t)}var a={},u={},c={all:{},controller:{},behavior:{}},l={};return l.addControllerWithAction=function(n,e,r){var i=t(n),a=i.action(e,r);return a.bind(o(c.controller)),i},l.addController=function(n,e){var r=t(n);return e.call({},r),i(r),r},l.addBehavior=function(n,t){if(e(n))throw"Stik: Another behavior already exist with name '"+n+"'";var o=r({name:n,executionUnit:t});return a[n]=o,l.applyBehavior(o),o},l.addBoundary=function(t){var e;if(t.from=t.from||"all",-1===["all","controller","behavior"].indexOf(t.from))throw"Stik: Invalid boundary 'from' specified. Please use 'controller', 'behavior', 'all' or leave it blank to default to 'all'";return e=n.createBoundary(t),c[t.from][t.as]=e,e},l.applyBehaviors=function(){var n,t=!1;for(n in a)l.applyBehavior(a[n])&&(t=!0);return t},l.applyBehavior=function(n){var t=o(c.behavior);return n.bind(t)},l.bindActionWithTemplate=function(n,t,e){var r,i=o(c.controller);return r=u[n].actions[t].bindWithTemplate(e,i),r.modules=i,r},l.bindBehaviorWithTemplate=function(n,t){var e,r=o(c.behavior);return e=a[n].bindWithTemplate(t,r),e.modules=r,e},l.bindActions=function(){var n,t=o(c.controller),e=!1;for(n in u)u[n].bind(t)&&(e=!0);return e},l.getBoundary=function(n){var t,e;for(t in c)for(e in c[t])if(e===n)return c[t][e]},l.boundariesFor=function(n){return o(c[n])},l.$reset=function(){u={},a={}},l}}(window.stik),function(n){n.$$manager=n.manager(),n.controller=function(t,e,r){return"string"==typeof e?n.$$manager.addControllerWithAction(t,e,r):n.$$manager.addController(t,e)},n.behavior=function(t,e){return n.$$manager.addBehavior(t,e)},n.lazyBind=window.stik.bindLazy=function(){if(!n.$$manager.bindActions()&!n.$$manager.applyBehaviors())throw"Stik: Nothing new to bind!"},n.boundary=function(t){return n.$$manager.addBoundary(t)}}(window.stik),function(n,t){n.boundary({as:"$courier",cache:!0,to:new t})}(window.stik,window.Courier),function(n){function t(){for(var n in r)o.hasOwnProperty(n)||(o[n]=r[n]);return o}var e={},r={},o={};n.helper=function(o,i){if(!o)throw"Stik: Helper needs a name";if(!i||"function"!=typeof i)throw"Stik: Helper needs a function";return r[o]=n.injectable({module:i,resolvable:!0}),e[o]=function(){var n=r[o].resolve(t());return n.apply({},arguments)},e[o]},e.pushDoubles=function(t){for(var e in t)o[e]=n.injectable({module:t[e]})},e.cleanDoubles=function(){o={}},n.boundary({as:"$h",to:e})}(window.stik),function(n){n.boundary({as:"$window",to:window}),n.helper("$window",function(){return window}),n.helper("isArray",function(){return function(n){return"[object Array]"===Object.prototype.toString.call(n)}}),n.helper("debounce",function(){return function(n,t,e){var r;return function(){var o=this,i=arguments,a=function(){r=null,e||n.apply(o,i)},u=e&&!r;clearTimeout(r),r=setTimeout(a,t),u&&n.apply(o,i)}}}),n.helper("deepExtend",function(){return function(n,t){for(var e in t)Object.isObjectLiteral(n[e])&&Object.isObjectLiteral(t[e])?(n[e]=n[e]||{},arguments.callee(n[e],t[e])):n[e]=t[e];return n}}),n.helper("zip",function(){return function(n,t){for(var e=[],r=0;r<n.length;r++)e.push([]),e[r].push(n[r]),e[r].push(t[r]);return e}})}(window.stik),function(n){n.boundary({as:"$viewBag",resolvable:!0,to:function(n){function t(n){return o(n)?n.value:n.textContent}function e(n,t){o(n)?n.value=t:n.textContent=t}function r(){return n.getAttribute(a)?[n]:n.querySelectorAll("["+a+"]")}function o(n){return"INPUT"===n.nodeName.toUpperCase()||"TEXTAREA"===n.nodeName.toUpperCase()}if(!n)throw"Stik: ViewBag needs a template to be attached to";var i={},a="data-key";return i.push=function(n){for(var t,o=r(),i=o.length;i--;)t=o[i].getAttribute(a),void 0!==n[t]&&e(o[i],n[t])},i.pull=function(){for(var e,o=r(n),i={},u=o.length;u--;)e=o[u].getAttribute(a),i[e]=t(o[u]);return i},i}})}(window.stik),window.stik.boundary({as:"$url",resolvable:!0,to:function(n){return{baseUrl:function(){return n.location.href},relativeUrl:function(){return this.baseUrl.match(/http:\/\/.+?(\/.+$)/)[1]},pathName:function(){return n.location.pathname},hash:function(n){return this.locationHash(n).replace(/^#/,"")},hashBang:function(n){return this.locationHash("!"+n).replace(/^#!/,"")},locationHash:function(t){return void 0!==t&&(n.location.hash=t),n.location.hash},mainPath:function(){return"/"+this.pathName().split("/")[1]},goTo:function(t){n.location=t},queries:function t(){var n,t,e;if(t=this.baseUrl().split("?")[1]){t=t.split("&"),n={};for(var r=0;r<t.length;r++)e=t[r].split("="),n[e[0]]=e[1];return n}return{}}}}}),function(n){n.labs={}}(window.stik),function(n){n.labs.behavior=function(t){function e(){var n=document.implementation.createHTMLDocument();return n.body.innerHTML=t.template,n.body.firstChild}function r(t){for(var e in t)o.modules[e]=n.injectable({module:t[e]});return o.modules}if(!t)throw"Stik: Behavior Lab needs an environment to run";if(!t.name)throw"Stik: Behavior Lab needs a name";if(!t.template)throw"Stik: Behavior Lab needs a template";var o,i={};return i.template=e(),o=n.$$manager.bindBehaviorWithTemplate(t.name,i.template),i.run=function(n){o.context.load(o.executionUnit,r(n))},i}}(window.stik),function(n){n.labs.boundary=function(t){function e(t){var e=n.$$manager.boundariesFor("behavior");for(var r in t)e[r]=n.injectable({module:t[r]});return e}if(!t)throw"Stik: Boundary Lab needs an environment to run";if(!t.name)throw"Stik: Boundary Lab needs a name";var r={},o=n.$$manager.getBoundary(t.name);return r.run=function(n){return o.to.resolve(e(n))},r}}(window.stik),function(n,t){t.labs.controller=function(e){function r(){var t=n.implementation.createHTMLDocument();return t.body.innerHTML=e.template,t.body.firstChild}function o(n){for(var e in n)i.modules[e]=t.injectable({module:n[e]});return i.modules}if(!e)throw"Stik: Controller Lab needs an environment to run";if(!e.name)throw"Stik: Controller Lab needs a name";if(!e.action)throw"Stik: Controller Lab needs the action name";if(!e.template)throw"Stik: Controller Lab needs a template";var i,a={};return a.template=r(),i=t.$$manager.bindActionWithTemplate(e.name,e.action,a.template),a.run=function(n){i.context.load(i.executionUnit,o(n))},a}}(window.document,window.stik),function(n){n.helper=function(t){if(!t)throw"Stik: Helper Lab needs an environment to run";if(!t.name)throw"Stik: Helper Lab needs a name";var e={},r=n.boundary({name:"$h"});return e.run=function(n){var e=r.run(n);return e.pushDoubles(n),function(){return e[t.name].apply({},arguments)}},e}}(window.stik.labs),function(n){n.dom=function(t){if(!t)throw"Stik: Helper Lab needs an environment to run";if(!t.name)throw"Stik: Helper Lab needs a name";var e={},r=n.boundary({name:"$dom"});return e.run=function(n){var e=r.run(n);return e.pushDoubles(n),function(){return e[t.name].apply({},arguments)}},e}}(window.stik.labs);